<!DOCTYPE HTML>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1" http-equiv="X-UA-Conpatible" />
    <!-- DatePicker JavaScript & CSS -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.js" />
<script type="text/javascript" src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" />
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />
    <h:outputStylesheet library="css" name="bootstrap.min.css" />
    <title>crudWeb</title>
    <style type="text/css">
        .btnWidth {
            width: 80px;
        }     
    </style>
        <script type="text/javascript">
        $(document).ready(function () {
            var today = new Date();
            $('.datepicker').datepicker({
            	dateFormat: 'dd.mm.yy',
      	      changeMonth: true,
      	      changeYear: true,
                autoclose:true,
                endDate: "today",
                maxDate: today,
                yearRange: "1900:2018"
            }).on('changeDate', function (ev) {
                    $(this).datepicker('hide');
                });


            $('.datepicker').keyup(function () {
                if (this.value.match(/[^0-9]/g)) {
                    this.value = this.value.replace(/[^0-9^-]/g, '');
                }
            });
        });
    
</script>
</h:head>
<h:body>
    <h:form id="createPersonForm" class="form-horizontal">
        <div class="form-group">
            <div class="col-sm-4"></div>
            <div class="col-sm-4">
                <h2>Create Person</h2>
            </div>
        </div>
        <hr/>
        <div class="form-group">
            <h:outputLabel for="firstName" class="control-label col-sm-4">First Name:</h:outputLabel>
            <div class="col-sm-4">
                <h:inputText id="firstName-id" value="#{personBean.firstName}" class="form-control" validatorMessage="First name is required">
                    <f:validateRequired />
                </h:inputText>
            </div>
        </div>
        <div class="form-group">
            <h:outputLabel for="lastName" class="control-label col-sm-4">Last Name:</h:outputLabel>
            <div class="col-sm-4">
                <h:inputText id="lastName-id" value="#{personBean.lastName}" class="form-control" validatorMessage="Last Name Id is required">
                    <f:validateRequired/>
                </h:inputText>
            </div>
        </div>

        
        <div class="form-group">
                        <h:outputLabel for="Birth Date" styleClass="control-label col-sm-4"> Birth date:</h:outputLabel>
                        <div class="col-sm-4">
                            <h:inputText value="#{personBean.birthDate}" class="form-control datepicker" validatorMessage="Bad date format">
                            <f:validateRegex pattern="^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$" />
                        </h:inputText>
                        <h:message for="birthDate-id" style="color:red"/>
                        </div>
                    </div>
        
        
        <div class="form-group">
            <h:outputLabel for="email" class="control-label col-sm-4">Email:</h:outputLabel>
            <div class="col-sm-4">
                <h:inputText id="email-id" value="#{personBean.email}" class="form-control" validatorMessage="Bad email format">
                   <f:validateRegex pattern="(^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[\p{L}\p{M}\p{N}.-]*(\.[\p{L}\p{M}]{2,})$)?" />
                </h:inputText>
                <h:message for="email-id"/>
            </div>
        </div>
        <div class="form-group">
            <h:outputLabel for="address" class="control-label col-sm-4">Address:</h:outputLabel>
            <div class="col-sm-4">
                <h:inputTextarea id="address-id" value="#{personBean.address}" cols="50" rows="5" class="form-control" validatorMessage="Address is required">
                    <f:validateRequired/>
                </h:inputTextarea>
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-4"></div>
            <div class="col-sm-4">
                <div class="col-sm-2">
                    <h:commandButton value="Save" action="#{personBean.savePersonDetails(personBean)}" class="btn btn-success btnWidth" />
                </div>
                <div class="col-sm-1">
                </div>
                <div class="col-sm-2">
                    <h:link outcome="personsList" value="View Persons Record List" class="btn btn-primary" />
                </div>
            </div>
        </div>
    </h:form>
</h:body>
</html>